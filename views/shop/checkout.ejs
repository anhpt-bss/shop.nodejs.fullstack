<%- include ../partials/header %>

<!-- MAIN -->
<main>
  <div class="container mt-5 mb-5 checkout">

    <!-- Flash messages -->
    <div class="row mt-3 mb-3">
      <div class="col-md-8 m-auto">
        <% if (errorMsg) { %>
        <div id="error" class="alert alert-danger">
          <%= errorMsg %>
        </div>
        <% } else { %>
        <div id="error" class="alert alert-danger d-none"></div>
        <% } %>
      </div>
    </div>

    <div class="col-md-8 m-auto">
      <!-- Checkout form -->
      <form action="/checkout" method="POST" id="checkout-form">
        <div class="row">

          <div class="col-md-12">
            <div class="form-group">
              <label for="phone">Số điện thoại</label>
              <input type="text" id="phone" class="form-control" required name="phone" />
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group">
              <label for="address">Địa chỉ</label>
              <input type="text" id="address" class="form-control" required name="address" />
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group">
              <label for="note">Ghi chú</label>
              <textarea type="text" id="note" class="form-control" name="note" rows="3"></textarea>
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group">
              <label for="paymentMethod">Phương thức thanh toán</label>
              <select aria-label="Chọn phương thức thanh toán" type="select" id="paymentMethod" class="form-control" required name="paymentMethod">
                <option value="cast" selected>Thanh toán khi nhận hàng</option>
                <option value="stripe">Stripe</option>
              </select>
            </div>
          </div>

          <div class="col-md-12" id="stripeCardHolderName" style="display: none;">
            <div class="form-group">
              <label for="card-name">Tên chủ thẻ</label>
              <input type="text" id="card-name" class="form-control" />
            </div>
          </div>
          <div class="col-md-12" id="stripeCardInfo" style="display: none;">
            <label for="card-element">Thông tin thẻ</label>
            <!-- A Stripe Element will be inserted here. -->
            <div id="card-element" class="StripeElement"></div>
            <!-- Used to display form errors. -->
            <div id="card-errors" role="alert" class="text-danger mb-3"></div>
          </div>

          <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
        </div>

        <hr>
        <div class="row mt-2 text-right">
          <div class="col-md-12 col-sm-12 m-auto">
            <button id="submit-btn" type="submit" class="btn btn-dark button-style text-right">
              Đặt hàng
            </button>
          </div>
        </div>
      </form>
    </div>

  </div>
</main>

<script type="text/javascript" src="https://js.stripe.com/v3/"></script>
<script type="text/javascript" src="js/checkout.js"></script>

<%- include ../partials/footer %>